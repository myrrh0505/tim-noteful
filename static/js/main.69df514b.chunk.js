(this["webpackJsonptim-noteful"]=this["webpackJsonptim-noteful"]||[]).push([[0],{27:function(e,t,n){e.exports=n(50)},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(22),i=n.n(r),c=n(8),l=(n(32),n(18)),s=n(19),u=n(1),d=n(2),m=n(4),h=n(3),f=n(5),p=n(11),v=n(25),b=n(26);n(33);function N(e){e.button,e.className,e.children;var t=Object(b.a)(e,["button","className","children"]);return o.a.createElement(e.button,Object(v.a)({className:["button",e.className].join(" ")},t),e.children)}var E=o.a.createContext({notes:[],folders:[],deleteNote:function(){},addNote:function(){},newFolder:function(){},deleteFolder:function(){}}),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.id===parseInt(t)}))},y=(n(34),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.context,n=t.notes,a=t.folders,r=this.props.match.params.noteId,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.id===parseInt(t)}))}(a,(j(n,r)||{}).folderId);return o.a.createElement("div",{className:"noteViewFolder"},o.a.createElement(N,{button:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"noteViewFolder-goBack"},"Go Back"),i&&o.a.createElement("h3",{className:"noteViewFolder-folderName"},i.name))}}]),t}(o.a.Component));y.defaultProps={history:{goBack:function(){}},match:{params:{}}},y.contextType=E;var O="https://shrouded-hamlet-39949.herokuapp.com/api/",k=(n(35),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).handleClickDelete=function(e){e.preventDefault();var t=n.props.id;fetch("".concat(O,"notes/").concat(t),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){n.context.deleteNote(t)})).catch((function(e){console.error("delete note",{error:e})}))},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,a=e.modified;return this.props.id?o.a.createElement("div",{className:"note"},o.a.createElement("h2",{className:"noteTitle"},o.a.createElement(c.b,{to:"/note/".concat(t)},n)),o.a.createElement("button",{className:"deleteNote",type:"button",onClick:this.handleClickDelete},"remove"),o.a.createElement("div",{className:"noteDate"},o.a.createElement("div",{className:"modifiedDate"},"Modified"," ",o.a.createElement("span",{className:"Date"},a)))):o.a.createElement(p.a,{to:"/"})}}]),t}(o.a.Component));k.contextType=E,k.defaultProps={onDeleteNote:function(){},history:{push:function(){}}},k.contextType=E;n(41);var g=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=this.props.match.params.noteId,n=j(e,t)||{content:""};return o.a.createElement("section",{className:"noteView"},o.a.createElement(k,{id:n.id,name:n.name,modified:n.modified,onDeleteNote:this.handleDeleteNote}),o.a.createElement("div",{className:"noteView-content"},n.content.split(/\n \r|\n/).map((function(e,t){return o.a.createElement("p",{key:t},e)}))))}}]),t}(o.a.Component);g.defaultProps={match:{params:{}}},g.contextType=E;n(42);var C=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter((function(e){return e.folder_id===t})):e}(this.context.notes,parseInt(e));return o.a.createElement("section",{className:"noteList"},o.a.createElement("ul",{className:"noteListUl"},t.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement(k,{id:e.id,name:e.name,modified:e.modified}))}))),o.a.createElement("div",{className:"noteList-buttonBox"},o.a.createElement(N,{button:c.b,to:"/add-note",type:"button",className:"noteList-addNote"},"Add note")))}}]),t}(o.a.Component);C.defaultProps={match:{params:{}}},C.contextType=E;n(43);var F=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.context,t=e.folders,n=void 0===t?[]:t,a=e.notes,r=void 0===a?[]:a;return o.a.createElement("div",{className:"noteListFolder"},o.a.createElement("ul",{className:"noteListFolder-list"},n.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement(c.c,{className:"noteListFolder-folderLink",to:"/folder/".concat(e.id)},o.a.createElement("span",{className:"noteListFolder-num"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return e.folder_id===t})).length}(r,e.id)),e.name))}))),o.a.createElement("div",{className:"notesListFolder-buttonBox"},o.a.createElement(N,{button:c.b,to:"/add-folder",type:"button",className:"noteListFolder-addButton"},"Add folder")))}}]),t}(o.a.Component);F.contextType=E;var x=F;n(44);function S(){return o.a.createElement("header",null,o.a.createElement("h1",null,o.a.createElement(c.b,{to:"/"},"Noteful")))}function w(e){return e.message?o.a.createElement("div",{className:"error"},e.message):o.a.createElement(o.a.Fragment,null)}var T=n(17),I=n.n(T),D=(n(46),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.context.folders,n=void 0===t?[]:t;return o.a.createElement("select",{className:"dropdown",onChange:function(t){return e.props.updateFolderId(t.target.value)}},n.map((function(e){return o.a.createElement("option",{key:e.id,value:e.id,className:"folderOption"},e.name)})))}}]),t}(o.a.Component));D.contextType=E;var _=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.hasError?o.a.createElement("h2",null,"Sorry could not add this input."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(o.a.Component),P=(n(47),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).updateFolderId=function(e){n.setState({folder_id:{value:e,touched:!0}})},n.state={name:{value:"",touched:!1},modified:"",folder_id:{value:"1",touched:!1},content:{value:"",touched:!1}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"linkTo",value:function(){console.log("redirected via linkTo"),this.props.router.push("/")}},{key:"updateName",value:function(e,t){this.updateModified(t),this.setState({name:{value:e,touched:!0}})}},{key:"updateModified",value:function(e){this.setState({modified:e})}},{key:"updateContent",value:function(e,t){this.updateModified(t),this.setState({content:{value:e,touched:!0}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={name:this.state.name.value,modified:this.state.modified,content:this.state.content.value,folder_id:this.state.folder_id.value};fetch(O+"notes",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e}))})).then((function(e){t.setState({name:{value:e.name},modified:e.modified,folder_id:{value:e.folder_id},content:{value:e.content}}),t.context.addNote(e),t.props.history.push("/")}))}},{key:"timeStamp",value:function(){I()().ToDate()}},{key:"validateFolderId",value:function(){if(null===this.state.folder_id.value)return"Picking a folder is required"}},{key:"validateName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Name is required":e.length<3?"Name must be at least 3 characters long":void 0}},{key:"validateContent",value:function(){if(0===this.state.content.value.trim().length)return"Contents of the note are empty, this is required for note creation"}},{key:"render",value:function(){var e=this,t=this.validateName(),n=this.validateContent(),a=this.validateFolderId(),r=I()().toDate();return o.a.createElement("form",{className:"AddNote",onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement(_,null,o.a.createElement("h2",null,"Create a new note!"),o.a.createElement("div",{className:"registration__hint"},"* required field"),o.a.createElement("label",{htmlFor:"name"},"Note Name *"),o.a.createElement("input",{type:"text",className:"noteCreation",id:"makeName",onChange:function(t){return e.updateName(t.target.value,r)}}),this.state.name.touched&&o.a.createElement(w,{message:t}),o.a.createElement("label",{className:"select",htmlFor:"folderSelect"},"Pick a folder *"),o.a.createElement(D,{updateFolderId:this.updateFolderId}),this.state.folder_id.touched&&o.a.createElement(w,{folder_idError:a}),o.a.createElement("label",{className:"contentText",htmlFor:"Content"},"Note Content *"),o.a.createElement("input",{type:"text",className:"noteContentCreation",name:"Content",id:"makeContent",onChange:function(t){return e.updateContent(t.target.value,r)}}),this.state.name.touched&&o.a.createElement(w,{message:n}),o.a.createElement("button",{type:"submit",className:"noteCreation_button",disabled:this.validateName()||this.validateContent()||this.validateFolderId(),onSubmit:function(t){return e.linkTo()}},"Create Note")))}}]),t}(o.a.Component));P.contextType=E;n(48);var L=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={name:{value:"",touched:!1},id:""},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateName",value:function(e){this.setState({name:{value:e,touched:!0}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={id:this.state.id,name:this.state.name.value};fetch(O+"folders",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e}))})).then((function(e){t.setState({name:{value:e.name},id:e.id}),t.context.newFolder(e),t.props.history.push("/")}))}},{key:"validateName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Name is required":e.length<3?"Name must be at least 3 characters long":void 0}},{key:"render",value:function(){var e=this,t=this.validateName();return o.a.createElement("form",{className:"newFolder",onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement(_,null,o.a.createElement("h2",null,"Create a new folder!"),o.a.createElement("div",{className:"folderCreation__hint"},"* required field"),o.a.createElement("label",{htmlFor:"name"},"Folder Name *"),o.a.createElement("input",{type:"text",className:"folderCreation",name:"name",id:"name",onChange:function(t){return e.updateName(t.target.value)}}),this.state.name.touched&&o.a.createElement(w,{message:t}),o.a.createElement("button",{type:"submit",className:"folderCreation_button",style:this.state.name.touched?{cursor:"pointer"}:{cursor:"not-allowed"},disabled:this.validateName()},"Create Folder")))}}]),t}(o.a.Component);L.contextType=E;n(49);var B=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={notes:[],folders:[],goHome:!1},n.updateList=function(){Promise.all([fetch("".concat(O,"folders")),fetch("".concat(O,"notes"))]).then((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return a.ok?n.ok?Promise.all([a.json(),n.json()]):n.json().then((function(e){return Promise.reject(e)})):a.json().then((function(e){return Promise.reject(e)}))})).then((function(e){var t=Object(s.a)(e,2),a=t[0],o=t[1];n.setState({notes:a,folders:o})})).catch((function(e){console.error({error:e})}))},n.handleDeleteNote=function(e){n.setState({notes:n.state.notes.filter((function(t){return t.id!==e}))})},n.addNote=function(e){n.setState({notes:[].concat(Object(l.a)(n.state.notes),[e])})},n.newFolder=function(e){n.setState({folders:[].concat(Object(l.a)(n.state.folders),[e])})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"renderFolderRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map((function(e){return o.a.createElement(p.b,{exact:!0,key:e,path:e,component:x})})),o.a.createElement(p.b,{path:"/note/:noteId",component:y}),o.a.createElement(p.b,{path:"/add-folder",component:y}),o.a.createElement(p.b,{path:"/add-note",component:y}))}},{key:"renderNoteRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map((function(e){return o.a.createElement(p.b,{exact:!0,key:e,path:e,component:C})})),o.a.createElement(p.b,{path:"/note/:noteId",component:g}),o.a.createElement(p.b,{path:"/add-folder",component:L}),o.a.createElement(p.b,{path:"/add-note",component:P}))}},{key:"render",value:function(){var e={folders:this.state.folders,notes:this.state.notes,deleteNote:this.handleDeleteNote,addNote:this.addNote,newFolder:this.newFolder};return o.a.createElement(E.Provider,{value:e},o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"folderNav"},this.renderFolderRoutes()),o.a.createElement(S,null),o.a.createElement("main",{className:"seeNotes"},this.renderNoteRoutes())))}}]),t}(o.a.Component);B.defaultProps={history:{push:function(){},goBack:function(){}}};var A=B;i.a.render(o.a.createElement(c.a,null,o.a.createElement(A,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.69df514b.chunk.js.map